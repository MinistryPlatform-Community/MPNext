{"version":3,"file":"nw-embed.umd.js","sources":["../src/shared/base-widget.ts","../src/shared/api-client.ts","../src/components/pledge.ts","../src/index.ts"],"sourcesContent":["/**\n * Base class for Northwoods embeddable widgets\n * Handles Shadow DOM, API communication, and token management\n */\nexport abstract class NorthwoodsWidget extends HTMLElement {\n  protected root: ShadowRoot;\n  protected apiHost: string;\n  protected tenantId: string;\n  protected tokenProvider: () => Promise<string>;\n\n  constructor() {\n    super();\n    this.root = this.attachShadow({ mode: \"open\" });\n\n    // Read config from <script> tag or element attributes\n    const scriptTag = document.querySelector<HTMLScriptElement>(\n      \"script[data-api-host]\"\n    );\n    this.apiHost =\n      this.getAttribute(\"api-host\") ||\n      scriptTag?.dataset.apiHost ||\n      \"https://northwoods.vercel.app\";\n    this.tenantId =\n      this.getAttribute(\"tenant\") || scriptTag?.dataset.tenant || \"\";\n\n    console.log(\"üîß Widget constructor - checking for token provider...\");\n    console.log(\"window.__nwTokenProvider exists?\", !!(window as any).__nwTokenProvider);\n    console.log(\"window.__nwTokenProvider.get exists?\", !!(window as any).__nwTokenProvider?.get);\n\n    // Token provider with refresh support\n    this.tokenProvider =\n      (window as any).__nwTokenProvider?.get ||\n      (async () => {\n        console.warn(\"‚ö†Ô∏è No token provider initialized. Call init() before using the widget.\");\n        return this.getAttribute(\"token\") || \"\";\n      });\n  }\n\n  /**\n   * Fetch wrapper with automatic token injection and refresh on 401\n   */\n  protected async fetch(path: string, init?: RequestInit): Promise<Response> {\n    // Wait for token provider to be ready (max 5 seconds)\n    await this.waitForTokenProvider();\n    \n    let token: string;\n    \n    try {\n      token = await this.tokenProvider();\n    } catch (error) {\n      console.error(\"‚ùå Error getting token from tokenProvider:\", error);\n      throw new Error(`Failed to get authentication token: ${error instanceof Error ? error.message : \"Unknown error\"}`);\n    }\n    \n    if (!token) {\n      console.error(\"‚ùå No token received from tokenProvider\");\n      console.error(\"Make sure you called init() with a tokenProvider before mounting the widget\");\n      throw new Error(\"Authentication token not available. Did you call init()?\");\n    }\n\n    console.log(\"üîë Token received:\", token.substring(0, 20) + \"...\");\n    \n    const headers: Record<string, string> = {\n      ...(init?.headers as Record<string, string>),\n      Authorization: `Bearer ${token}`,\n    };\n\n    if (this.tenantId) {\n      headers[\"X-Tenant-ID\"] = this.tenantId;\n    }\n\n    const res = await fetch(`${this.apiHost}${path}`, {\n      ...init,\n      headers,\n      credentials: \"omit\",\n      mode: \"cors\",\n    });\n\n    // Handle token refresh on 401\n    if (res.status === 401 && (window as any).__nwTokenProvider?.refresh) {\n      const newToken = await (window as any).__nwTokenProvider.refresh();\n      return fetch(`${this.apiHost}${path}`, {\n        ...init,\n        headers: {\n          ...(init?.headers as Record<string, string>),\n          Authorization: `Bearer ${newToken}`,\n          \"X-Tenant-ID\": this.tenantId,\n        },\n        credentials: \"omit\",\n        mode: \"cors\",\n      });\n    }\n\n    return res;\n  }\n\n  /**\n   * Inject CSS into Shadow DOM\n   * Uses Constructable Stylesheets when available, fallback to <style> tag\n   */\n  protected injectStyles(css: string): void {\n    if (\n      \"adoptedStyleSheets\" in Document.prototype &&\n      \"replace\" in CSSStyleSheet.prototype\n    ) {\n      try {\n        const sheet = new CSSStyleSheet();\n        sheet.replaceSync(css);\n        this.root.adoptedStyleSheets = [sheet];\n      } catch (e) {\n        // Fallback for older browsers\n        this.injectStyleTag(css);\n      }\n    } else {\n      this.injectStyleTag(css);\n    }\n  }\n\n  /**\n   * Fallback style injection via <style> tag\n   */\n  private injectStyleTag(css: string): void {\n    const style = document.createElement(\"style\");\n    style.textContent = css;\n    this.root.appendChild(style);\n  }\n\n  /**\n   * Wait for token provider to be initialized\n   */\n  private async waitForTokenProvider(): Promise<void> {\n    // Wait for SDK ready promise first (if it exists)\n    if ((window as any).__nwSDKReady) {\n      console.log(\"‚è≥ Waiting for SDK initialization...\");\n      await (window as any).__nwSDKReady;\n      console.log(\"‚úÖ SDK initialization complete\");\n    }\n\n    // Double-check token provider is available\n    const maxWaitTime = 5000; // 5 seconds\n    const checkInterval = 100; // Check every 100ms\n    const startTime = Date.now();\n\n    while (!(window as any).__nwTokenProvider) {\n      if (Date.now() - startTime > maxWaitTime) {\n        throw new Error(\"Token provider not initialized after 5 seconds. Make sure init() is called.\");\n      }\n      await new Promise(resolve => setTimeout(resolve, checkInterval));\n    }\n\n    // Update token provider reference\n    this.tokenProvider = (window as any).__nwTokenProvider.get;\n    console.log(\"‚úÖ Token provider ready\");\n  }\n\n  /**\n   * Emit custom event from widget\n   */\n  protected emit(eventName: string, detail?: any): void {\n    this.dispatchEvent(\n      new CustomEvent(eventName, {\n        detail,\n        bubbles: true,\n        composed: true,\n      })\n    );\n  }\n\n  /**\n   * Abstract method to be implemented by child widgets\n   */\n  abstract render(): void;\n\n  /**\n   * Lifecycle hook - called when element is added to DOM\n   */\n  abstract connectedCallback(): void;\n}\n\n/**\n * Global token provider interface\n */\ndeclare global {\n  interface Window {\n    __nwTokenProvider?: {\n      get: () => Promise<string>;\n      refresh?: () => Promise<string>;\n    };\n    __nwSDKReady?: Promise<void>;\n    __nwSDKReadyResolve?: () => void;\n  }\n}\n","/**\n * Centralized API client for widget communication\n */\n\nexport interface ApiClientConfig {\n  apiHost: string;\n  tenantId?: string;\n  getToken: () => Promise<string>;\n  onTokenRefresh?: (newToken: string) => void;\n}\n\nexport class ApiClient {\n  private config: ApiClientConfig;\n\n  constructor(config: ApiClientConfig) {\n    this.config = config;\n  }\n\n  async request<T>(\n    path: string,\n    options: RequestInit & { skipRetry?: boolean } = {}\n  ): Promise<T> {\n    const { skipRetry, ...init } = options;\n    const token = await this.config.getToken();\n\n    const headers: Record<string, string> = {\n      \"Content-Type\": \"application/json\",\n      ...(init.headers as Record<string, string>),\n      Authorization: `Bearer ${token}`,\n    };\n\n    if (this.config.tenantId) {\n      headers[\"X-Tenant-ID\"] = this.config.tenantId;\n    }\n\n    const response = await fetch(`${this.config.apiHost}${path}`, {\n      ...init,\n      headers,\n      credentials: \"omit\",\n      mode: \"cors\",\n    });\n\n    // Handle 401 with token refresh\n    if (response.status === 401 && !skipRetry && this.config.onTokenRefresh) {\n      const newToken = await this.refreshToken();\n      if (newToken) {\n        return this.request<T>(path, { ...options, skipRetry: true });\n      }\n    }\n\n    if (!response.ok) {\n      const error = await response.json().catch(() => ({\n        error: response.statusText,\n      }));\n      throw new Error(error.error || `Request failed: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  async post<T>(path: string, data: any, init?: RequestInit): Promise<T> {\n    return this.request<T>(path, {\n      ...init,\n      method: \"POST\",\n      body: JSON.stringify(data),\n    });\n  }\n\n  async get<T>(path: string, init?: RequestInit): Promise<T> {\n    return this.request<T>(path, {\n      ...init,\n      method: \"GET\",\n    });\n  }\n\n  private async refreshToken(): Promise<string | null> {\n    // This would call the session endpoint to get a fresh token\n    // Implementation depends on your auth flow\n    return null;\n  }\n}\n","import { NorthwoodsWidget } from \"../shared/base-widget\";\n\ninterface PledgeState {\n  courageousGift: string;\n  consistentGift: string;\n  creativeGift: string;\n  total: string;\n  errors: Record<string, boolean>;\n  isSubmitting: boolean;\n  isSuccess: boolean;\n  errorMessage: string;\n}\n\ninterface FormData {\n  firstName: string;\n  lastName: string;\n  email: string;\n  phone: string;\n  address: string;\n  city: string;\n  state: string;\n  zipcode: string;\n  notes?: string;\n}\n\nexport class PledgeWidget extends NorthwoodsWidget {\n  private state: PledgeState = {\n    courageousGift: \"\",\n    consistentGift: \"\",\n    creativeGift: \"\",\n    total: \"0.00\",\n    errors: {},\n    isSubmitting: false,\n    isSuccess: false,\n    errorMessage: \"\",\n  };\n\n  private campaignId: number;\n\n  constructor() {\n    super();\n    this.campaignId = parseInt(this.getAttribute(\"campaign-id\") || \"115\");\n  }\n\n  connectedCallback() {\n    this.injectStyles(this.getStyles());\n    this.render();\n    this.attachEventListeners();\n  }\n\n  private inputHandler = (e: Event) => this.handleInput(e);\n  private submitHandler = (e: Event) => this.handleSubmit(e);\n\n  private attachEventListeners() {\n    // Remove existing listeners to prevent duplicates\n    this.root.removeEventListener(\"input\", this.inputHandler);\n    this.root.removeEventListener(\"submit\", this.submitHandler);\n    \n    // Add listeners\n    this.root.addEventListener(\"input\", this.inputHandler);\n    this.root.addEventListener(\"submit\", this.submitHandler);\n  }\n\n  private handleInput(e: Event) {\n    const target = e.target as HTMLInputElement;\n\n    if (\n      target.name === \"courageous_gift\" ||\n      target.name === \"consistent_gift\" ||\n      target.name === \"creative_gift\"\n    ) {\n      const formatted = this.formatCurrency(target.value);\n      target.value = formatted;\n\n      const previousCreativeGift = this.state.creativeGift;\n      \n      if (target.name === \"courageous_gift\") this.state.courageousGift = formatted;\n      if (target.name === \"consistent_gift\") this.state.consistentGift = formatted;\n      if (target.name === \"creative_gift\") this.state.creativeGift = formatted;\n\n      this.updateTotal();\n      \n      // Re-render if creative gift changed from empty to non-empty or vice versa\n      if (target.name === \"creative_gift\") {\n        const wasEmpty = !previousCreativeGift || previousCreativeGift === \"\" || previousCreativeGift === \"0\" || previousCreativeGift === \"0.00\";\n        const isEmpty = !formatted || formatted === \"\" || formatted === \"0\" || formatted === \"0.00\";\n        if (wasEmpty !== isEmpty) {\n          this.render();\n        }\n      }\n    }\n\n    if (target.name === \"phone\") {\n      const formatted = this.formatPhoneNumber(target.value);\n      target.value = formatted;\n    }\n  }\n\n  private formatCurrency(value: string): string {\n    const numericValue = value.replace(/[^0-9.]/g, \"\");\n    const parts = numericValue.split(\".\");\n    if (parts.length > 2) return value;\n\n    const decimalPart = parts[1];\n    if (decimalPart !== undefined && decimalPart.length > 2) return value;\n\n    return numericValue;\n  }\n\n  private parseNumeric(value: string): number {\n    const numeric = value.replace(/[^0-9.]/g, \"\");\n    return parseFloat(numeric) || 0;\n  }\n\n  private formatPhoneNumber(value: string): string {\n    const numeric = value.replace(/\\D/g, \"\");\n    const limited = numeric.substring(0, 10);\n\n    if (limited.length <= 3) {\n      return limited;\n    } else if (limited.length <= 6) {\n      return `${limited.slice(0, 3)}-${limited.slice(3)}`;\n    } else {\n      return `${limited.slice(0, 3)}-${limited.slice(3, 6)}-${limited.slice(6)}`;\n    }\n  }\n\n  private updateErrorStates() {\n    // Update error classes on inputs without re-rendering the whole form\n    const inputs = this.root.querySelectorAll<HTMLInputElement | HTMLTextAreaElement>('input, select, textarea');\n    \n    inputs.forEach(input => {\n      const fieldName = input.name;\n      if (this.state.errors[fieldName]) {\n        input.classList.add('error');\n      } else {\n        input.classList.remove('error');\n      }\n    });\n  }\n\n  private updateTotal() {\n    const a = this.parseNumeric(this.state.courageousGift);\n    const b = this.parseNumeric(this.state.consistentGift);\n    const c = this.parseNumeric(this.state.creativeGift);\n    const sum = a + b + c;\n    this.state.total = sum.toFixed(2);\n    \n    const totalInput = this.root.querySelector<HTMLInputElement>('input[name=\"total_gift\"]');\n    if (totalInput) totalInput.value = this.state.total;\n  }\n\n  private validateEmail(email: string): boolean {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email);\n  }\n\n  private validatePhone(phone: string): boolean {\n    const numericPhone = phone.replace(/\\D/g, \"\");\n    return numericPhone.length === 10;\n  }\n\n  private async handleSubmit(e: Event) {\n    e.preventDefault();\n    \n    // Prevent duplicate submissions\n    if (this.state.isSubmitting) {\n      return;\n    }\n    \n    const form = e.target as HTMLFormElement;\n    const formData = new FormData(form);\n\n    const data: FormData = {\n      firstName: formData.get(\"firstName\") as string,\n      lastName: formData.get(\"lastName\") as string,\n      email: formData.get(\"email\") as string,\n      phone: formData.get(\"phone\") as string,\n      address: formData.get(\"address\") as string,\n      city: formData.get(\"city\") as string,\n      state: formData.get(\"state\") as string,\n      zipcode: formData.get(\"zipcode\") as string,\n      notes: formData.get(\"notes\") as string || undefined,\n    };\n\n    const newErrors: Record<string, boolean> = {};\n\n    if (!data.firstName?.trim()) newErrors.firstName = true;\n    if (!data.lastName?.trim()) newErrors.lastName = true;\n    if (!data.email?.trim() || !this.validateEmail(data.email)) newErrors.email = true;\n    if (!data.phone?.trim() || !this.validatePhone(data.phone)) newErrors.phone = true;\n    if (!data.address?.trim()) newErrors.address = true;\n    if (!data.city?.trim()) newErrors.city = true;\n    if (!data.zipcode?.trim() || data.zipcode.length !== 5) newErrors.zipcode = true;\n\n    const a = this.parseNumeric(this.state.courageousGift);\n    const b = this.parseNumeric(this.state.consistentGift);\n    const c = this.parseNumeric(this.state.creativeGift);\n\n    if (a === 0 && b === 0 && c === 0) {\n      newErrors.courageous_gift = true;\n      newErrors.consistent_gift = true;\n      newErrors.creative_gift = true;\n    }\n\n    this.state.errors = newErrors;\n\n    if (Object.keys(newErrors).length > 0) {\n      // Update error states without re-rendering entire form\n      this.updateErrorStates();\n      return;\n    }\n\n    this.state.isSubmitting = true;\n    this.state.errorMessage = \"\";\n    this.render();\n\n    try {\n      const idempotencyKey = crypto.randomUUID();\n\n      const apiUrl = this.apiHost || \"http://localhost:3000\";\n      const response = await this.fetch(`/api/embed/pledge/submit`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Idempotency-Key\": idempotencyKey,\n        },\n        body: JSON.stringify({\n          campaignId: this.campaignId,\n          firstName: data.firstName,\n          lastName: data.lastName,\n          email: data.email,\n          phone: data.phone,\n          address: data.address,\n          city: data.city,\n          state: data.state,\n          zipcode: data.zipcode,\n          courageous_gift: this.state.courageousGift,\n          consistent_gift: this.state.consistentGift,\n          creative_gift: this.state.creativeGift,\n          total_gift: this.state.total,\n          notes: data.notes,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({ error: \"Unknown error\" }));\n        throw new Error(errorData.error || `HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n\n      if (result.success) {\n        this.state.isSuccess = true;\n        this.emit(\"pledgeSubmitted\", {\n          pledgeId: result.pledgeId,\n          total: this.state.total,\n        });\n      } else {\n        this.state.errorMessage = result.error || \"Failed to save pledge. Please try again.\";\n        this.emit(\"pledgeError\", { error: this.state.errorMessage });\n      }\n    } catch (error: any) {\n      this.state.errorMessage = error.message || \"Failed to save pledge. Please try again.\";\n      this.emit(\"pledgeError\", { error: this.state.errorMessage });\n    } finally {\n      this.state.isSubmitting = false;\n      this.render();\n    }\n  }\n\n  render() {\n    if (this.state.isSuccess) {\n      this.root.innerHTML = this.renderSuccess();\n    } else {\n      this.root.innerHTML = this.renderForm();\n    }\n    this.attachEventListeners();\n  }\n\n  private renderSuccess(): string {\n    const totalFormatted = parseFloat(this.state.total).toLocaleString(\"en-US\", {\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2,\n    });\n\n    return `\n      <div class=\"nw-pledge\">\n        <div class=\"pledge-header success-header\">\n          <div class=\"success-title\">Thank You!</div>\n          <p class=\"success-message\">\n            Thank you for your commitment to the Now is the time Campaign.\n          </p>\n        </div>\n        <div class=\"pledge-success-content\">\n          <div class=\"total-commitment\">\n            <div class=\"commitment-label\">Total Commitment</div>\n            <div class=\"commitment-amount\">$${totalFormatted}</div>\n          </div>\n          <div class=\"success-text\">\n            <p>Your commitment has been recorded successfully.</p>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  private renderForm(): string {\n    const { errors, isSubmitting, errorMessage } = this.state;\n    \n    return `\n      <form class=\"nw-pledge\" novalidate>\n        <div class=\"pledge-header\">\n          <div class=\"pledge-title\">MY COMMITMENT</div>\n          \n          <div class=\"form-row\">\n            <div class=\"form-field\">\n              <label for=\"firstName\">FIRST NAME</label>\n              <input type=\"text\" id=\"firstName\" name=\"firstName\" required \n                class=\"${errors.firstName ? 'error' : ''}\" ${isSubmitting ? 'disabled' : ''}>\n            </div>\n            <div class=\"form-field\">\n              <label for=\"lastName\">LAST NAME</label>\n              <input type=\"text\" id=\"lastName\" name=\"lastName\" required \n                class=\"${errors.lastName ? 'error' : ''}\" ${isSubmitting ? 'disabled' : ''}>\n            </div>\n          </div>\n\n          <div class=\"form-field\">\n            <label for=\"email\">EMAIL</label>\n            <input type=\"email\" id=\"email\" name=\"email\" required \n              class=\"${errors.email ? 'error' : ''}\" ${isSubmitting ? 'disabled' : ''}>\n          </div>\n\n          <div class=\"form-field\">\n            <label for=\"phone\">PHONE</label>\n            <input type=\"tel\" id=\"phone\" name=\"phone\" required placeholder=\"555-555-5555\"\n              class=\"${errors.phone ? 'error' : ''}\" ${isSubmitting ? 'disabled' : ''}>\n          </div>\n\n          <div class=\"form-field\">\n            <label for=\"address\">ADDRESS</label>\n            <input type=\"text\" id=\"address\" name=\"address\" required \n              class=\"${errors.address ? 'error' : ''}\" ${isSubmitting ? 'disabled' : ''}>\n          </div>\n\n          <div class=\"form-row form-row-3\">\n            <div class=\"form-field\">\n              <label for=\"city\">CITY</label>\n              <input type=\"text\" id=\"city\" name=\"city\" required \n                class=\"${errors.city ? 'error' : ''}\" ${isSubmitting ? 'disabled' : ''}>\n            </div>\n            <div class=\"form-field\">\n              <label for=\"state\">STATE</label>\n              <select id=\"state\" name=\"state\" ${isSubmitting ? 'disabled' : ''}>\n                ${this.renderStateOptions()}\n              </select>\n            </div>\n            <div class=\"form-field\">\n              <label for=\"zipcode\">ZIPCODE</label>\n              <input type=\"text\" id=\"zipcode\" name=\"zipcode\" required maxlength=\"5\" pattern=\"[0-9]{5}\" placeholder=\"12345\"\n                class=\"${errors.zipcode ? 'error' : ''}\" ${isSubmitting ? 'disabled' : ''}>\n            </div>\n          </div>\n\n          <div class=\"commitment-header\">WITH DEPENDENCE ON GOD I/WE COMMIT TO:</div>\n        </div>\n\n        <div class=\"pledge-body\">\n\n          <div class=\"gift-section\">\n            <div class=\"gift-row\">\n              <div class=\"gift-label\">COURAGEOUS GIFT</div>\n              <div class=\"gift-input-wrapper\">\n                <span class=\"currency-symbol\">$</span>\n                <input type=\"text\" name=\"courageous_gift\" placeholder=\"0.00\" \n                  class=\"${errors.courageous_gift ? 'error' : ''}\" ${isSubmitting ? 'disabled' : ''}>\n              </div>\n            </div>\n            <div class=\"gift-description\">\n              Given on or before Commitment Sunday on Nov. 9. If using a check, make it payable to \"Northwoods\" with a memo of \"Now is the Time\".\n            </div>\n          </div>\n\n          <div class=\"gift-section\">\n            <div class=\"gift-row\">\n              <div class=\"gift-label\">CONSISTENT GIFT</div>\n              <div class=\"gift-input-wrapper\">\n                <span class=\"currency-symbol\">$</span>\n                <input type=\"text\" name=\"consistent_gift\" placeholder=\"0.00\" \n                  class=\"${errors.consistent_gift ? 'error' : ''}\" ${isSubmitting ? 'disabled' : ''}>\n              </div>\n            </div>\n            <div class=\"gift-description\">\n              In addition to your Courageous Gift, the total over the next 25 months from Dec. 1, 2025 to Dec. 31, 2027.\n            </div>\n          </div>\n\n          <div class=\"gift-section\">\n            <div class=\"gift-row\">\n              <div class=\"gift-label\">CREATIVE GIFT</div>\n              <div class=\"gift-input-wrapper\">\n                <span class=\"currency-symbol\">$</span>\n                <input type=\"text\" name=\"creative_gift\" placeholder=\"0.00\" \n                  class=\"${errors.creative_gift ? 'error' : ''}\" ${isSubmitting ? 'disabled' : ''}>\n              </div>\n            </div>\n            <div class=\"gift-description\">\n              Provide an estimated value.\n            </div>\n            ${this.state.creativeGift && this.state.creativeGift !== \"\" && this.state.creativeGift !== \"0\" && this.state.creativeGift !== \"0.00\" ? `\n              <div class=\"notes-section\">\n                <label for=\"notes\">Describe the creative gift(s) of stocks, bonds, or other assets.</label>\n                <textarea id=\"notes\" name=\"notes\" rows=\"3\" ${isSubmitting ? 'disabled' : ''}></textarea>\n              </div>\n            ` : ''}\n          </div>\n\n          <div class=\"total-section\">\n            <div class=\"total-label\">TOTAL GIFT</div>\n            <div class=\"total-input-wrapper\">\n              <span class=\"currency-symbol\">$</span>\n              <input type=\"text\" name=\"total_gift\" value=\"${this.state.total}\" readonly class=\"total-amount\">\n            </div>\n          </div>\n        </div>\n\n        <div class=\"pledge-footer\">\n          ${errorMessage ? `\n            <div class=\"error-message\">${errorMessage}</div>\n          ` : ''}\n          <button type=\"submit\" ${isSubmitting ? 'disabled' : ''}>\n            ${isSubmitting ? 'Saving...' : 'MAKE MY PLEDGE'}\n          </button>\n        </div>\n      </form>\n    `;\n  }\n\n  private renderStateOptions(): string {\n    const states = [\n      \"AL\", \"AK\", \"AZ\", \"AR\", \"CA\", \"CO\", \"CT\", \"DE\", \"FL\", \"GA\",\n      \"HI\", \"ID\", \"IL\", \"IN\", \"IA\", \"KS\", \"KY\", \"LA\", \"ME\", \"MD\",\n      \"MA\", \"MI\", \"MN\", \"MS\", \"MO\", \"MT\", \"NE\", \"NV\", \"NH\", \"NJ\",\n      \"NM\", \"NY\", \"NC\", \"ND\", \"OH\", \"OK\", \"OR\", \"PA\", \"RI\", \"SC\",\n      \"SD\", \"TN\", \"TX\", \"UT\", \"VT\", \"VA\", \"WA\", \"WV\", \"WI\", \"WY\"\n    ];\n    return states.map(state => \n      `<option value=\"${state}\" ${state === \"IL\" ? \"selected\" : \"\"}>${state}</option>`\n    ).join(\"\");\n  }\n\n  private getStyles(): string {\n    return `\n      :host {\n        all: initial;\n        display: block;\n        font-family: ui-sans-serif, system-ui, -apple-system, sans-serif;\n      }\n\n      .nw-pledge {\n        max-width: 600px;\n        margin: 0 auto;\n        background: white;\n        border-radius: 16px;\n        overflow: hidden;\n        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n      }\n\n      .pledge-header {\n        background: #002855;\n        color: white;\n        padding: 40px 32px;\n      }\n\n      .success-header {\n        text-align: center;\n      }\n\n      .pledge-title, .success-title {\n        font-size: 28px;\n        font-weight: bold;\n        text-align: center;\n        margin-bottom: 32px;\n      }\n\n      .success-title {\n        font-size: 36px;\n        margin-bottom: 24px;\n      }\n\n      .success-message {\n        font-size: 18px;\n        line-height: 1.6;\n        margin: 0;\n      }\n\n      .pledge-success-content {\n        padding: 40px 32px;\n        text-align: center;\n      }\n\n      .total-commitment {\n        margin-bottom: 24px;\n      }\n\n      .commitment-label {\n        font-size: 12px;\n        color: #6b7280;\n        text-transform: uppercase;\n        letter-spacing: 0.05em;\n        margin-bottom: 8px;\n      }\n\n      .commitment-amount {\n        font-size: 48px;\n        font-weight: bold;\n        color: #002855;\n      }\n\n      .success-text {\n        color: #374151;\n        line-height: 1.6;\n      }\n\n      .form-field {\n        margin-bottom: 16px;\n      }\n\n      .form-row {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        gap: 12px;\n        margin-bottom: 16px;\n      }\n\n      .form-row-3 {\n        grid-template-columns: 2fr 1fr 1fr;\n      }\n\n      label {\n        display: block;\n        font-size: 12px;\n        color: #d1d5db;\n        text-transform: uppercase;\n        letter-spacing: 0.05em;\n        margin-bottom: 6px;\n      }\n\n      input, select, textarea {\n        width: 100%;\n        padding: 12px 16px;\n        border: 1px solid #d1d5db;\n        border-radius: 8px;\n        font-size: 14px;\n        color: #1f2937;\n        background: white;\n        box-sizing: border-box;\n      }\n\n      select {\n        appearance: none;\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        background-image: url(\"data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e\");\n        background-repeat: no-repeat;\n        background-position: right 0.5rem center;\n        background-size: 1.5em 1.5em;\n        padding-right: 2.5rem;\n      }\n\n      input:focus, select:focus, textarea:focus {\n        outline: none;\n        background: #f9fafb;\n        border-color: #004C97;\n      }\n\n      input.error, select.error, textarea.error {\n        border: 2px solid #FF6D6A;\n      }\n\n      input:disabled, select:disabled, textarea:disabled, button:disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n      }\n\n      .pledge-body {\n        padding: 32px;\n      }\n\n      .commitment-header {\n        color: white;\n        padding: 12px 20px;\n        margin-bottom: 0;\n        font-size: 18px;\n        font-weight: bold;\n        text-align: center;\n      }\n\n      .gift-section {\n        margin-bottom: 32px;\n      }\n\n      .gift-row {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        gap: 16px;\n        align-items: center;\n        margin-bottom: 12px;\n      }\n\n      .gift-label {\n        font-size: 16px;\n        font-weight: bold;\n        color: #002855;\n      }\n\n      .gift-input-wrapper {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n      }\n\n      .currency-symbol {\n        color: #6b7280;\n        font-size: 16px;\n      }\n\n      .gift-input-wrapper input {\n        flex: 1;\n      }\n\n      .gift-description {\n        font-size: 13px;\n        color: #374151;\n        font-style: italic;\n        line-height: 1.5;\n        padding-left: calc(50% + 8px);\n      }\n\n      .notes-section {\n        margin-top: 16px;\n      }\n\n      .notes-section label {\n        color: #6b7280;\n        font-size: 12px;\n        text-transform: none;\n        margin-bottom: 8px;\n      }\n\n      .total-section {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        gap: 16px;\n        align-items: center;\n        margin-top: 32px;\n        padding-top: 32px;\n        border-top: 2px solid #e5e7eb;\n      }\n\n      .total-label {\n        font-size: 18px;\n        font-weight: bold;\n        color: #002855;\n      }\n\n      .total-input-wrapper {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n      }\n\n      .total-amount {\n        font-size: 20px;\n        font-weight: bold;\n        color: #002855;\n        border: none !important;\n        background: transparent !important;\n        padding-left: 0 !important;\n      }\n\n      .pledge-footer {\n        background: #002855;\n        padding: 32px;\n        text-align: center;\n      }\n\n      .error-message {\n        background: #fee;\n        color: #c00;\n        padding: 12px 16px;\n        border-radius: 8px;\n        margin-bottom: 16px;\n        text-align: center;\n      }\n\n      button[type=\"submit\"] {\n        padding: 12px 32px;\n        background: white;\n        color: #002855;\n        font-weight: bold;\n        font-size: 16px;\n        border: none;\n        border-radius: 8px;\n        cursor: pointer;\n        transition: background 0.2s;\n      }\n\n      button[type=\"submit\"]:hover:not(:disabled) {\n        background: #f3f4f6;\n      }\n\n      @media (max-width: 640px) {\n        .form-row, .gift-row, .total-section {\n          grid-template-columns: 1fr;\n        }\n\n        .form-row-3 {\n          grid-template-columns: 1fr;\n        }\n\n        .gift-description {\n          padding-left: 24px;\n        }\n\n        .pledge-header, .pledge-body, .pledge-footer {\n          padding: 24px;\n        }\n      }\n    `;\n  }\n}\n\ncustomElements.define(\"nw-pledge\", PledgeWidget);\n","/**\n * Northwoods Embed SDK\n * Web components for embedding Northwoods widgets\n */\n\nexport { NorthwoodsWidget } from \"./shared/base-widget\";\nexport { ApiClient } from \"./shared/api-client\";\nexport { PledgeWidget } from \"./components/pledge\";\n\n// Auto-register components\nimport \"./components/pledge\";\n\n// Global ready promise that resolves when SDK is initialized\nif (typeof window !== \"undefined\") {\n  let readyResolve: (() => void) | null = null;\n  (window as any).__nwSDKReady = new Promise<void>((resolve) => {\n    readyResolve = resolve;\n  });\n  (window as any).__nwSDKReadyResolve = readyResolve;\n}\n\n/**\n * Initialize the SDK with token provider\n */\nexport function init(config: {\n  tokenProvider: {\n    get: () => Promise<string>;\n    refresh?: () => Promise<string>;\n  };\n}): void {\n  console.log(\"‚úÖ Northwoods SDK initialized with token provider\");\n  \n  if (typeof window !== \"undefined\") {\n    (window as any).__nwTokenProvider = config.tokenProvider;\n    console.log(\"‚úÖ Token provider set on window.__nwTokenProvider\");\n    \n    // Resolve ready promise\n    if ((window as any).__nwSDKReadyResolve) {\n      (window as any).__nwSDKReadyResolve();\n      console.log(\"‚úÖ SDK ready promise resolved\");\n    }\n  }\n  \n  // Test the token provider immediately\n  config.tokenProvider.get()\n    .then(token => {\n      if (token) {\n        console.log(\"‚úÖ Token provider test successful, token length:\", token.length);\n      } else {\n        console.error(\"‚ùå Token provider returned empty token\");\n      }\n    })\n    .catch(error => {\n      console.error(\"‚ùå Token provider test failed:\", error);\n    });\n}\n\n/**\n * Set token provider globally (alternative to init)\n */\nif (typeof window !== \"undefined\") {\n  (window as any).NorthwoodsEmbed = {\n    init,\n    setTokenProvider: (provider: { get: () => Promise<string>; refresh?: () => Promise<string> }) => {\n      (window as any).__nwTokenProvider = provider;\n    }\n  };\n}\n\n// Export global types\ndeclare global {\n  interface Window {\n    __nwTokenProvider?: {\n      get: () => Promise<string>;\n      refresh?: () => Promise<string>;\n    };\n    __nwSDKReady?: Promise<void>;\n    __nwSDKReadyResolve?: () => void;\n  }\n}\n"],"names":["NorthwoodsWidget","scriptTag","_a","_b","path","init","token","error","headers","res","newToken","css","sheet","style","maxWaitTime","checkInterval","startTime","resolve","eventName","detail","ApiClient","config","options","skipRetry","response","data","PledgeWidget","e","target","formatted","previousCreativeGift","value","numericValue","parts","decimalPart","numeric","limited","input","fieldName","a","b","c","sum","totalInput","email","phone","form","formData","newErrors","_c","_d","_e","_f","_g","idempotencyKey","apiUrl","errorData","result","errors","isSubmitting","errorMessage","state","readyResolve","provider"],"mappings":"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"}